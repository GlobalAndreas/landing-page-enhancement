import{readFileSync as r,writeFileSync as w}from'fs';import s from'sharp';const p='public/',v=r(p+'favicon.svg'),z=[16,32,48,64,128,192,256,512],x={'apple-touch-icon.png':180,'mstile-150x150.png':150};for(let i of z)await s(v).resize(i,i).png().toFile(p+`favicon-${i}x${i}.png`);for(let[n,i]of Object.entries(x))await s(v).resize(i,i).png().toFile(p+n);let b=[];for(let i of[16,32,48])b.push({s:i,b:await s(v).resize(i,i).png().toBuffer()});let h=Buffer.alloc(6),e=[];h.writeUInt16LE(0,0);h.writeUInt16LE(1,2);h.writeUInt16LE(3,4);let o=6+48;for(let{s:i,b:d}of b){let a=Buffer.alloc(16);a.writeUInt8(i,0);a.writeUInt8(i,1);a.writeUInt8(0,2);a.writeUInt8(0,3);a.writeUInt16LE(1,4);a.writeUInt16LE(32,6);a.writeUInt32LE(d.length,8);a.writeUInt32LE(o,12);e.push(a);o+=d.length}w(p+'favicon.ico',Buffer.concat([h,...e,...b.map(x=>x.b)]));console.log('âœ“ All favicons generated')
